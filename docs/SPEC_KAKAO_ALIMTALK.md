# ğŸ“± ì¹´ì¹´ì˜¤ ì•Œë¦¼í†¡ ì—°ë™ ìŠ¤í™ ë° êµ¬í˜„ ê³„íš

> **ë²„ì „**: 2.0  
> **ì‘ì„±ì¼**: 2026ë…„ 1ì›” 25ì¼  
> **ìˆ˜ì •ì¼**: 2026ë…„ 2ì›” 3ì¼  
> **ìƒíƒœ**: êµ¬í˜„ ëŒ€ê¸° (ë¹„ì¦ˆë‹ˆìŠ¤ ì±„ë„ ì‹¬ì‚¬ ì¤‘)  
> **ìš°ì„ ìˆœìœ„**: P0 (ìµœìš°ì„ )

---

## ğŸ“‹ ëª©ì°¨

1. [ê°œìš”](#1-ê°œìš”)
2. [í˜„í™© ë¶„ì„](#2-í˜„í™©-ë¶„ì„)
3. [ì‚¬ì „ ì„¤ì • ì²´í¬ë¦¬ìŠ¤íŠ¸](#3-ì‚¬ì „-ì„¤ì •-ì²´í¬ë¦¬ìŠ¤íŠ¸)
4. [ì•Œë¦¼í†¡ í…œí”Œë¦¿](#4-ì•Œë¦¼í†¡-í…œí”Œë¦¿)
5. [API ì„¤ê³„](#5-api-ì„¤ê³„)
6. [ë°ì´í„°ë² ì´ìŠ¤ ë³€ê²½](#6-ë°ì´í„°ë² ì´ìŠ¤-ë³€ê²½)
7. [Server Action ìˆ˜ì •](#7-server-action-ìˆ˜ì •)
8. [UI/UX ë³€ê²½ ìƒì„¸](#8-uiux-ë³€ê²½-ìƒì„¸)
9. [êµ¬í˜„ ìˆœì„œ (Task ëª©ë¡)](#9-êµ¬í˜„-ìˆœì„œ-task-ëª©ë¡)
10. [í…ŒìŠ¤íŠ¸ ê³„íš](#10-í…ŒìŠ¤íŠ¸-ê³„íš)
11. [ë¡¤ë°± ê³„íš](#11-ë¡¤ë°±-ê³„íš)
12. [ë¹„ìš© ì˜ˆìƒ](#12-ë¹„ìš©-ì˜ˆìƒ)

---

## 1. ê°œìš”

### 1.1 ëª©ì 

ì‚¬ì¥ë‹˜ì´ ê³„ì•½ì„œë¥¼ ì‘ì„± ì™„ë£Œ í›„ ê·¼ë¡œìì—ê²Œ ìë™ìœ¼ë¡œ ì¹´ì¹´ì˜¤ ì•Œë¦¼í†¡ì„ ë°œì†¡í•˜ì—¬ ì„œëª… ë§í¬ë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤.

### 1.2 í˜„ì¬ ìƒíƒœ

- í˜„ì¬: ì¹´ì¹´ì˜¤í†¡ SDK ê¸°ë°˜ ê³µìœ  (ì‚¬ì¥ë‹˜ì´ ì§ì ‘ ê³µìœ  ë²„íŠ¼ í´ë¦­)
- ë³€ê²½: ì•Œë¦¼í†¡ìœ¼ë¡œ ìë™ ë°œì†¡ (SDK ê³µìœ  ê¸°ëŠ¥ì€ ë³´ì¡° ìˆ˜ë‹¨ìœ¼ë¡œ ìœ ì§€)

### 1.3 ì„ ì • ì œê³µì‚¬

- **ì•Œë¦¬ê³  (Aligo)**: ì €ë ´í•˜ê³  êµ­ë‚´ì—ì„œ ë§ì´ ì‚¬ìš©ë˜ëŠ” ì„œë¹„ìŠ¤
- í™ˆí˜ì´ì§€: https://smartsms.aligo.in

### 1.4 ê²°ì • ì‚¬í•­ ìš”ì•½

| í•­ëª©             | ê²°ì • ë‚´ìš©                                         |
| ---------------- | ------------------------------------------------- |
| ì•Œë¦¼í†¡ ë°œì†¡ ì‹œì  | ê³„ì•½ì„œ ì „ì†¡ ì‹œ (ê·¼ë¡œìì—ê²Œ)                       |
| Fallback ì „ëµ    | ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ ë²„íŠ¼ + ë§í¬ ë³µì‚¬ ì•ˆë‚´ (SMS ë¯¸ì‚¬ìš©) |
| ê³µìœ  UI ë³€ê²½     | ì•Œë¦¼í†¡ ìë™ë°œì†¡ (ê¸°ë³¸) + ë§í¬ë³µì‚¬ (ë³´ì¡°)          |
| ì¬ì „ì†¡ ì œí•œ      | ê³„ì•½ì„œë‹¹ ì´ 3íšŒ                                   |
| ë¹„ìš© ì²˜ë¦¬        | í•­ìƒ ë¬´ë£Œ (ìš´ì˜ë¹„ í¬í•¨)                           |

---

## 2. í˜„í™© ë¶„ì„

### 2.1 í˜„ì¬ ê³µìœ  í”Œë¡œìš° (AS-IS)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    í˜„ì¬ ê³„ì•½ì„œ ê³µìœ  í”Œë¡œìš°                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  [ì‚¬ì¥ë‹˜] ê³„ì•½ì„œ ì‘ì„±                                             â”‚
â”‚      â”‚                                                           â”‚
â”‚      â–¼                                                           â”‚
â”‚  [ì‚¬ì¥ë‹˜] ì„œëª…                                                    â”‚
â”‚      â”‚                                                           â”‚
â”‚      â–¼                                                           â”‚
â”‚  [ì‚¬ì¥ë‹˜] "ì €ì¥í•˜ê³  ê³µìœ í•˜ê¸°" ë²„íŠ¼ í´ë¦­                           â”‚
â”‚      â”‚                                                           â”‚
â”‚      â–¼                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚        ê³µìœ  ë°”í…€ì‹œíŠ¸ í‘œì‹œ                   â”‚                 â”‚
â”‚  â”‚                                            â”‚                 â”‚
â”‚  â”‚  [ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ë³´ë‚´ê¸°] â† ì¹´ì¹´ì˜¤ SDK ê³µìœ     â”‚                 â”‚
â”‚  â”‚         ë˜ëŠ”                               â”‚                 â”‚
â”‚  â”‚  [ë§í¬ ë³µì‚¬] â† ì‚¬ì¥ë‹˜ì´ ì§ì ‘ ë¶™ì—¬ë„£ê¸°       â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚      â”‚                                                           â”‚
â”‚      â–¼                                                           â”‚
â”‚  [ì‚¬ì¥ë‹˜] ìˆ˜ë™ìœ¼ë¡œ ì¹´ì¹´ì˜¤í†¡/ë¬¸ìë¡œ ë§í¬ ì „ì†¡                      â”‚
â”‚      â”‚                                                           â”‚
â”‚      â–¼                                                           â”‚
â”‚  [ê·¼ë¡œì] ë§í¬ í´ë¦­ â†’ ì„œëª… í˜ì´ì§€ ì§„ì…                            â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ë¬¸ì œì :**

- ì‚¬ì¥ë‹˜ì´ ì§ì ‘ ê³µìœ í•´ì•¼ í•¨ (ìˆ˜ë™ ì‘ì—…)
- ì¹´ì¹´ì˜¤ SDK ê³µìœ ëŠ” "ê³µìœ í•˜ê¸°" í˜•íƒœ (ì•Œë¦¼í†¡ ì•„ë‹˜)
- ì¬ì „ì†¡ ì‹œ ë§¤ë²ˆ ìˆ˜ë™ ì‘ì—… í•„ìš”
- ë°œì†¡ ì„±ê³µ/ì‹¤íŒ¨ ì¶”ì  ë¶ˆê°€

### 2.2 ëª©í‘œ í”Œë¡œìš° (TO-BE)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ë³€ê²½ í›„ ê³„ì•½ì„œ ê³µìœ  í”Œë¡œìš°                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  [ì‚¬ì¥ë‹˜] ê³„ì•½ì„œ ì‘ì„± (ê·¼ë¡œì ì—°ë½ì²˜ ì…ë ¥ í¬í•¨)                   â”‚
â”‚      â”‚                                                           â”‚
â”‚      â–¼                                                           â”‚
â”‚  [ì‚¬ì¥ë‹˜] ì„œëª…                                                    â”‚
â”‚      â”‚                                                           â”‚
â”‚      â–¼                                                           â”‚
â”‚  [ì‚¬ì¥ë‹˜] "ì €ì¥í•˜ê³  ì „ì†¡í•˜ê¸°" ë²„íŠ¼ í´ë¦­                           â”‚
â”‚      â”‚                                                           â”‚
â”‚      â–¼                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚     ğŸš€ ìë™ìœ¼ë¡œ ì•Œë¦¼í†¡ ë°œì†¡ (ì„œë²„)          â”‚                 â”‚
â”‚  â”‚                                            â”‚                 â”‚
â”‚  â”‚  âœ… ì„±ê³µ ì‹œ: "ì „ì†¡ ì™„ë£Œ!" ì•ˆë‚´              â”‚                 â”‚
â”‚  â”‚  âŒ ì‹¤íŒ¨ ì‹œ: "ì¬ì‹œë„" ë²„íŠ¼ + "ë§í¬ ë³µì‚¬"    â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚      â”‚                                                           â”‚
â”‚      â–¼                                                           â”‚
â”‚  [ê·¼ë¡œì] ì¹´ì¹´ì˜¤í†¡ ì•Œë¦¼í†¡ ìˆ˜ì‹  (ë²„íŠ¼ í¬í•¨)                        â”‚
â”‚      â”‚                                                           â”‚
â”‚      â–¼                                                           â”‚
â”‚  [ê·¼ë¡œì] "ê³„ì•½ì„œ í™•ì¸í•˜ê¸°" ë²„íŠ¼ í´ë¦­ â†’ ì„œëª… í˜ì´ì§€               â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 í˜„ì¬ ì„¤ì • ìƒíƒœ

| í•­ëª©                 | ìƒíƒœ         | ë¹„ê³                 |
| -------------------- | ------------ | ------------------- |
| ì•Œë¦¬ê³  ê³„ì •          | âœ… ê°€ì… ì™„ë£Œ | API Key ë°œê¸‰ ëŒ€ê¸°   |
| ì¹´ì¹´ì˜¤ ë¹„ì¦ˆë‹ˆìŠ¤ ì±„ë„ | ğŸ”„ ì‹¬ì‚¬ ì¤‘   | 1-3ì¼ ì†Œìš” ì˜ˆìƒ     |
| ì•Œë¦¼í†¡ í…œí”Œë¦¿        | â³ ëŒ€ê¸°      | ì±„ë„ ìŠ¹ì¸ í›„ ë“±ë¡   |
| ê·¼ë¡œì ì—°ë½ì²˜ ìˆ˜ì§‘   | âœ… êµ¬í˜„ë¨    | ê³„ì•½ì„œ ì‘ì„± ì‹œ ì…ë ¥ |

### 2.4 í˜„ì¬ ê·¼ë¡œì ì—°ë½ì²˜ ìˆ˜ì§‘ í˜„í™©

**ì´ë¯¸ êµ¬í˜„ëœ ë¶€ë¶„:**

- `contracts` í…Œì´ë¸”ì— `worker_phone` ì»¬ëŸ¼ ì¡´ì¬
- ê³„ì•½ì„œ ì‘ì„± Step 4ì—ì„œ ê·¼ë¡œì íœ´ëŒ€í° ë²ˆí˜¸ ì…ë ¥ UI ì¡´ì¬
- `contractFormStore`ì— `workerPhone` í•„ë“œ ì¡´ì¬

**ìŠ¤í‚¤ë§ˆ í™•ì¸ (Amendment 10):**

```sql
-- ì´ë¯¸ ì ìš©ë¨
ALTER TABLE contracts ADD COLUMN IF NOT EXISTS worker_phone text;
CREATE INDEX IF NOT EXISTS idx_contracts_worker_phone ON contracts(worker_phone);
```

### 2.5 ë³€ê²½ ë²”ìœ„ ë¶„ì„

#### í”„ë¡ íŠ¸ì—”ë“œ ë³€ê²½

| íŒŒì¼                                                         | ë³€ê²½ ë‚´ìš©                    | ì˜í–¥ë„  |
| ------------------------------------------------------------ | ---------------------------- | ------- |
| `app/(protected)/employer/preview/[id]/contract-preview.tsx` | ë²„íŠ¼ ë¬¸êµ¬ ë³€ê²½, ê³µìœ  UI ë³€ê²½ | ğŸ”´ ë†’ìŒ |
| `app/(protected)/employer/preview/[id]/actions.ts`           | ì•Œë¦¼í†¡ ë°œì†¡ ë¡œì§ ì¶”ê°€        | ğŸ”´ ë†’ìŒ |
| `components/contract/ContractForm/Step2WorkerName.tsx`       | ì—°ë½ì²˜ í•„ìˆ˜ ì…ë ¥ ì•ˆë‚´ ê°•í™”   | ğŸŸ¡ ì¤‘ê°„ |

#### ë°±ì—”ë“œ ë³€ê²½

| íŒŒì¼                            | ë³€ê²½ ë‚´ìš©             | ì˜í–¥ë„  |
| ------------------------------- | --------------------- | ------- |
| `lib/aligo/client.ts` (ì‹ ê·œ)    | ì•Œë¦¬ê³  API í´ë¼ì´ì–¸íŠ¸ | ğŸŸ¢ ì‹ ê·œ |
| `lib/aligo/templates.ts` (ì‹ ê·œ) | í…œí”Œë¦¿ ë©”ì‹œì§€ ë¹Œë”    | ğŸŸ¢ ì‹ ê·œ |
| `lib/utils/phone.ts` (ì‹ ê·œ)     | ì „í™”ë²ˆí˜¸ ìœ í‹¸ë¦¬í‹°     | ğŸŸ¢ ì‹ ê·œ |

#### ë³€ê²½í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„

- ê¸°ì¡´ `share_token` ë¡œì§ ìœ ì§€ (ë§í¬ ë³µì‚¬ ê¸°ëŠ¥ ìœ ì§€)
- ê¸°ì¡´ ì¹´ì¹´ì˜¤ SDK ê³µìœ  ê¸°ëŠ¥ ìœ ì§€ (ë³´ì¡° ìˆ˜ë‹¨)
- ê·¼ë¡œì ì„œëª… í˜ì´ì§€ í”Œë¡œìš° ë³€ê²½ ì—†ìŒ

---

## 3. ì‚¬ì „ ì„¤ì • ì²´í¬ë¦¬ìŠ¤íŠ¸

### 3.1 ì•Œë¦¬ê³  ì„¤ì •

| ë‹¨ê³„ | ì‘ì—…                                 | ì˜ˆìƒ ì†Œìš” | ìƒíƒœ |
| ---- | ------------------------------------ | --------- | ---- |
| 1    | ì•Œë¦¬ê³  ë¡œê·¸ì¸                        | -         | âœ…   |
| 2    | API Key ë°œê¸‰ (ë§ˆì´í˜ì´ì§€ â†’ API ì„¤ì •) | 10ë¶„      | â³   |
| 3    | ë°œì‹ í”„ë¡œí•„ ë“±ë¡ ì‹ ì²­                 | 10ë¶„      | â³   |
| 4    | ë°œì‹ í”„ë¡œí•„ ì‹¬ì‚¬ ì™„ë£Œ                 | 1-2ì¼     | â³   |

**API Key ë°œê¸‰ ë°©ë²•:**

1. https://smartsms.aligo.in ì ‘ì†
2. ë¡œê·¸ì¸
3. ìš°ì¸¡ ìƒë‹¨ **ë§ˆì´í˜ì´ì§€** í´ë¦­
4. ì¢Œì¸¡ ë©”ë‰´ì—ì„œ **API ì„¤ì •** í´ë¦­
5. **API KEY** ë³µì‚¬ â†’ `.env.local`ì— ì €ì¥
6. **USER ID** (ì•„ì´ë””) ë³µì‚¬ â†’ `.env.local`ì— ì €ì¥

### 3.2 ì¹´ì¹´ì˜¤ ë¹„ì¦ˆë‹ˆìŠ¤ ì±„ë„ ì„¤ì •

| ë‹¨ê³„ | ì‘ì—…                    | ì˜ˆìƒ ì†Œìš” | ìƒíƒœ       |
| ---- | ----------------------- | --------- | ---------- |
| 1    | ì¹´ì¹´ì˜¤í†¡ ì±„ë„ ìƒì„±      | ì™„ë£Œ      | âœ…         |
| 2    | ë¹„ì¦ˆë‹ˆìŠ¤ ì±„ë„ ì „í™˜ ì‹ ì²­ | ì™„ë£Œ      | âœ…         |
| 3    | ë¹„ì¦ˆë‹ˆìŠ¤ ì±„ë„ ì‹¬ì‚¬ ì™„ë£Œ | 1-3ì¼     | ğŸ”„ ì‹¬ì‚¬ ì¤‘ |
| 4    | ì•Œë¦¬ê³ ì™€ ì±„ë„ ì—°ë™      | 10ë¶„      | â³         |

**ë¹„ì¦ˆë‹ˆìŠ¤ ì±„ë„ ì‹¬ì‚¬ ì™„ë£Œ í›„:**

1. ì•Œë¦¬ê³  ëŒ€ì‹œë³´ë“œ ì ‘ì†
2. **ì¹´ì¹´ì˜¤ ì•Œë¦¼í†¡** â†’ **ë°œì‹ í”„ë¡œí•„ ê´€ë¦¬**
3. **ë°œì‹ í”„ë¡œí•„ ë“±ë¡** í´ë¦­
4. ì¹´ì¹´ì˜¤ ë¹„ì¦ˆë‹ˆìŠ¤ ì±„ë„ ì—°ë™
5. `ALIGO_SENDER_KEY` ë°œê¸‰

### 3.3 ì•Œë¦¼í†¡ í…œí”Œë¦¿ ë“±ë¡

**ë¹„ì¦ˆë‹ˆìŠ¤ ì±„ë„ ìŠ¹ì¸ í›„ ë“±ë¡ ê°€ëŠ¥**

| ë‹¨ê³„ | ì‘ì—…                        | ì˜ˆìƒ ì†Œìš” | ìƒíƒœ |
| ---- | --------------------------- | --------- | ---- |
| 1    | ì•Œë¦¬ê³  â†’ í…œí”Œë¦¿ ê´€ë¦¬ â†’ ë“±ë¡ | 30ë¶„      | â³   |
| 2    | ì¹´ì¹´ì˜¤ í…œí”Œë¦¿ ì‹¬ì‚¬          | 1-3ì¼     | â³   |
| 3    | ì‹¬ì‚¬ ìŠ¹ì¸ ì™„ë£Œ              | -         | â³   |

### 3.4 í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

`.env.local`ì— ì¶”ê°€í•  í•­ëª©:

```bash
# ì•Œë¦¬ê³  ì•Œë¦¼í†¡ ì„¤ì •
ALIGO_API_KEY=ë°œê¸‰ë°›ì€_API_KEY
ALIGO_USER_ID=ì•Œë¦¬ê³ _ë¡œê·¸ì¸_ì•„ì´ë””
ALIGO_SENDER_KEY=ë°œê¸‰ë°›ì€_ë°œì‹ í”„ë¡œí•„í‚¤
SENDER_PHONE_NUMBER=ëŒ€í‘œ_ì—°ë½ì²˜_01012345678

# ì•Œë¦¼í†¡ ê¸°ëŠ¥ On/Off (ë¡¤ë°±ìš©)
ALIMTALK_ENABLED=true
```

**âš ï¸ ì£¼ì˜:** í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€ í›„ Vercelì—ë„ ë™ì¼í•˜ê²Œ ì„¤ì • í•„ìš”

---

## 4. ì•Œë¦¼í†¡ í…œí”Œë¦¿

### 4.1 ê³„ì•½ì„œ ì „ì†¡ ì•Œë¦¼ (CONTRACT_SENT)

```
[ì‹¸ì¸í•´ì£¼ì„¸ìš”] ê·¼ë¡œê³„ì•½ì„œê°€ ë„ì°©í–ˆì–´ìš”!

#{ì‚¬ì¥ë‹˜ì´ë¦„}ë‹˜ì´ ê·¼ë¡œê³„ì•½ì„œë¥¼ ë³´ëƒˆì–´ìš”.
ê³„ì•½ ë‚´ìš©ì„ í™•ì¸í•˜ê³  ì„œëª…í•´ì£¼ì„¸ìš”.

ğŸ“‹ ê·¼ë¬´ì§€: #{ê·¼ë¬´ì§€}
ğŸ’° ì‹œê¸‰: #{ì‹œê¸‰}ì›
ğŸ“… ê·¼ë¬´ ì‹œì‘ì¼: #{ì‹œì‘ì¼}

â–¶ ì„œëª… ê¸°í•œ: #{ë§Œë£Œì¼}ê¹Œì§€

[ê³„ì•½ì„œ í™•ì¸í•˜ê¸°]
```

**ë³€ìˆ˜:**

| ë³€ìˆ˜ëª…        | ì„¤ëª…                 | ì˜ˆì‹œ        |
| ------------- | -------------------- | ----------- |
| #{ì‚¬ì¥ë‹˜ì´ë¦„} | ì‚¬ì—…ì ì´ë¦„          | ê¹€ì‚¬ì¥      |
| #{ê·¼ë¬´ì§€}     | work_location        | GS25 ê°•ë‚¨ì  |
| #{ì‹œê¸‰}       | hourly_wage (í¬ë§·íŒ…) | 10,360      |
| #{ì‹œì‘ì¼}     | start_date (í¬ë§·íŒ…)  | 2026.02.01  |
| #{ë§Œë£Œì¼}     | expires_at (í¬ë§·íŒ…)  | 2026.02.08  |

**ë²„íŠ¼:**

- íƒ€ì…: WL (ì›¹ë§í¬)
- ë²„íŠ¼ëª…: ê³„ì•½ì„œ í™•ì¸í•˜ê¸°
- URL: `${APP_URL}/s/${share_token}`

### 4.2 ì›”ê¸‰ì œ ì§€ì› (wageType ë¶„ê¸°)

```typescript
// ì‹œê¸‰ì œì¼ ë•Œ
ğŸ’° ì‹œê¸‰: #{ì‹œê¸‰}ì›

// ì›”ê¸‰ì œì¼ ë•Œ
ğŸ’° ì›”ê¸‰: #{ì›”ê¸‰}ì›
```

---

## 5. API ì„¤ê³„

### 5.1 ì•Œë¦¼í†¡ ë°œì†¡ API

```typescript
// app/api/alimtalk/send/route.ts (í•„ìš” ì‹œ)

interface AlimtalkRequest {
  templateCode: string;
  phoneNumber: string;
  variables: Record<string, string>;
  buttonUrl: string;
}

interface AlimtalkResponse {
  success: boolean;
  messageId?: string;
  error?: string;
}
```

### 5.2 ì•Œë¦¬ê³  API í´ë¼ì´ì–¸íŠ¸

```typescript
// lib/aligo/client.ts

interface AligoConfig {
  apiKey: string;
  userId: string;
  senderKey: string;
  senderPhone: string;
}

interface SendAlimtalkParams {
  phoneNumber: string; // ìˆ˜ì‹ ì ë²ˆí˜¸
  templateCode: string; // í…œí”Œë¦¿ ì½”ë“œ
  message: string; // ë©”ì‹œì§€ ë‚´ìš©
  buttonUrl: string; // ë²„íŠ¼ URL
  buttonName?: string; // ë²„íŠ¼ ì´ë¦„ (ê¸°ë³¸: "ê³„ì•½ì„œ í™•ì¸í•˜ê¸°")
}

interface SendAlimtalkResult {
  success: boolean;
  messageId?: string; // ì„±ê³µ ì‹œ ë©”ì‹œì§€ ID
  error?: string; // ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ ë©”ì‹œì§€
  errorCode?: string; // ì•Œë¦¬ê³  ì—ëŸ¬ ì½”ë“œ
}

const ALIGO_API_URL = 'https://kakaoapi.aligo.in/akv10/alimtalk/send/';

interface AligoAlimtalkParams {
  apikey: string;
  userid: string;
  senderkey: string;
  tpl_code: string;
  sender: string;
  receiver_1: string;
  subject_1: string;
  message_1: string;
  button_1?: {
    button: Array<{
      name: string;
      linkType: 'WL';
      linkTypeName: 'ì›¹ë§í¬';
      linkMo: string;
      linkPc: string;
    }>;
  };
  failover?: 'Y' | 'N'; // SMS Fallback (ìš°ë¦¬ëŠ” 'N' ì‚¬ìš©)
}

export async function sendAlimtalk(params: {
  phoneNumber: string;
  templateCode: string;
  message: string;
  buttonUrl: string;
}): Promise<{ success: boolean; messageId?: string; error?: string }> {
  const body: AligoAlimtalkParams = {
    apikey: process.env.ALIGO_API_KEY!,
    userid: process.env.ALIGO_USER_ID!,
    senderkey: process.env.ALIGO_SENDER_KEY!,
    tpl_code: params.templateCode,
    sender: process.env.SENDER_PHONE_NUMBER!,
    receiver_1: params.phoneNumber,
    subject_1: '[ì‹¸ì¸í•´ì£¼ì„¸ìš”] ê·¼ë¡œê³„ì•½ì„œ ì•Œë¦¼',
    message_1: params.message,
    button_1: {
      button: [
        {
          name: 'ê³„ì•½ì„œ í™•ì¸í•˜ê¸°',
          linkType: 'WL',
          linkTypeName: 'ì›¹ë§í¬',
          linkMo: params.buttonUrl,
          linkPc: params.buttonUrl,
        },
      ],
    },
    failover: 'N', // SMS Fallback ë¯¸ì‚¬ìš©
  };

  const response = await fetch(ALIGO_API_URL, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/x-www-form-urlencoded',
    },
    body: new URLSearchParams(body as any).toString(),
  });

  const result = await response.json();

  if (result.code === 0) {
    return { success: true, messageId: result.info?.mid };
  } else {
    return { success: false, error: result.message };
  }
}
```

### 5.3 í…œí”Œë¦¿ ë©”ì‹œì§€ ë¹Œë”

```typescript
// lib/aligo/templates.ts

import { formatCurrency } from '@/lib/utils/format';

interface ContractSentTemplateData {
  employerName: string;
  workLocation: string;
  hourlyWage: number;
  monthlyWage?: number;
  wageType: 'hourly' | 'monthly';
  startDate: string;
  expiresAt: string;
}

export function buildContractSentMessage(
  data: ContractSentTemplateData
): string {
  const wageText =
    data.wageType === 'monthly'
      ? `ì›”ê¸‰: ${formatCurrency(data.monthlyWage)}ì›`
      : `ì‹œê¸‰: ${formatCurrency(data.hourlyWage)}ì›`;

  const formattedStartDate = new Date(data.startDate).toLocaleDateString(
    'ko-KR'
  );
  const formattedExpiry = new Date(data.expiresAt).toLocaleDateString('ko-KR');

  return `${data.employerName}ë‹˜ì´ ê·¼ë¡œê³„ì•½ì„œë¥¼ ë³´ëƒˆì–´ìš”.
ê³„ì•½ ë‚´ìš©ì„ í™•ì¸í•˜ê³  ì„œëª…í•´ì£¼ì„¸ìš”.

ğŸ“‹ ê·¼ë¬´ì§€: ${data.workLocation}
ğŸ’° ${wageText}
ğŸ“… ê·¼ë¬´ ì‹œì‘ì¼: ${formattedStartDate}

â–¶ ì„œëª… ê¸°í•œ: ${formattedExpiry}ê¹Œì§€`;
}
```

### 5.4 ì „í™”ë²ˆí˜¸ ìœ í‹¸ë¦¬í‹°

```typescript
// lib/utils/phone.ts

/**
 * ì „í™”ë²ˆí˜¸ë¥¼ ì•Œë¦¬ê³  API í˜•ì‹ìœ¼ë¡œ ì •ê·œí™”
 * - í•˜ì´í”ˆ ì œê±°
 * - ì•ì— 0 ì—†ìœ¼ë©´ ì¶”ê°€
 */
export function normalizePhone(phone: string): string {
  // ìˆ«ìë§Œ ì¶”ì¶œ
  const digitsOnly = phone.replace(/\D/g, '');

  // 01012345678 í˜•ì‹ìœ¼ë¡œ ë°˜í™˜
  if (digitsOnly.startsWith('82')) {
    return '0' + digitsOnly.slice(2);
  }
  if (!digitsOnly.startsWith('0')) {
    return '0' + digitsOnly;
  }
  return digitsOnly;
}

/**
 * ì „í™”ë²ˆí˜¸ ìœ íš¨ì„± ê²€ì‚¬
 */
export function isValidKoreanPhone(phone: string): boolean {
  const normalized = normalizePhone(phone);
  return /^01[016789]\d{7,8}$/.test(normalized);
}
```

---

## 6. ë°ì´í„°ë² ì´ìŠ¤ ë³€ê²½

### 6.1 notification_logs í…Œì´ë¸” ì¶”ê°€

```sql
-- ë§ˆì´ê·¸ë ˆì´ì…˜: add_notification_logs_table

CREATE TABLE notification_logs (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id uuid NOT NULL REFERENCES profiles(id) ON DELETE CASCADE,
  contract_id uuid REFERENCES contracts(id) ON DELETE SET NULL,
  recipient_phone text NOT NULL,
  type text NOT NULL,  -- 'alimtalk', 'sms', 'push'
  template_code text,
  status text NOT NULL,  -- 'sent', 'failed', 'pending'
  message_id text,  -- ì™¸ë¶€ ì„œë¹„ìŠ¤ì˜ ë©”ì‹œì§€ ID
  error text,
  created_at timestamptz NOT NULL DEFAULT now()
);

CREATE INDEX idx_notification_logs_user_id ON notification_logs(user_id);
CREATE INDEX idx_notification_logs_contract_id ON notification_logs(contract_id);
CREATE INDEX idx_notification_logs_created_at ON notification_logs(created_at DESC);

-- RLS
ALTER TABLE notification_logs ENABLE ROW LEVEL SECURITY;

CREATE POLICY notification_logs_select_own ON notification_logs
  FOR SELECT TO authenticated
  USING ((SELECT auth.uid()) = user_id);

CREATE POLICY notification_logs_insert_own ON notification_logs
  FOR INSERT TO authenticated
  WITH CHECK ((SELECT auth.uid()) = user_id);

COMMENT ON TABLE notification_logs IS 'ì•Œë¦¼ ë°œì†¡ ì´ë ¥ (ì•Œë¦¼í†¡, SMS, í‘¸ì‹œ)';
```

### 6.2 TypeScript íƒ€ì…

```typescript
// types/database.ts ì— ì¶”ê°€

export interface NotificationLogsRow {
  id: string;
  user_id: string;
  contract_id: string | null;
  recipient_phone: string;
  type: 'alimtalk' | 'sms' | 'push';
  template_code: string | null;
  status: 'sent' | 'failed' | 'pending';
  message_id: string | null;
  error: string | null;
  created_at: string;
}

export interface NotificationLogsInsert {
  user_id: string;
  contract_id?: string | null;
  recipient_phone: string;
  type: 'alimtalk' | 'sms' | 'push';
  template_code?: string | null;
  status: 'sent' | 'failed' | 'pending';
  message_id?: string | null;
  error?: string | null;
  created_at?: string;
}
```

---

## 7. Server Action ìˆ˜ì •

### 7.1 sendContractWithAlimtalk ì•¡ì…˜

```typescript
// app/(protected)/employer/preview/[id]/actions.ts

export async function sendContractWithAlimtalk(
  contractId: string
): Promise<ActionResult<{ shareUrl: string; alimtalkSent: boolean }>> {
  const supabase = await createClient();

  // ì•Œë¦¼í†¡ ê¸°ëŠ¥ ë¹„í™œì„±í™” ì‹œ ê¸°ì¡´ ë¡œì§ìœ¼ë¡œ í´ë°±
  const ALIMTALK_ENABLED = process.env.ALIMTALK_ENABLED === 'true';
  if (!ALIMTALK_ENABLED) {
    const result = await sendContract(contractId);
    if (result.success && result.data) {
      return {
        success: true,
        data: { shareUrl: result.data.shareUrl, alimtalkSent: false },
      };
    }
    return { success: false, error: result.error };
  }

  // 1. ì¸ì¦ í™•ì¸
  const {
    data: { user },
    error: authError,
  } = await supabase.auth.getUser();
  if (authError || !user) {
    return { success: false, error: 'ë¡œê·¸ì¸ì´ í•„ìš”í•´ìš”' };
  }

  // 2. ê³„ì•½ì„œ ì¡°íšŒ (ê·¼ë¡œì ì—°ë½ì²˜ í¬í•¨)
  const { data: contract, error: contractError } = await supabase
    .from('contracts')
    .select(
      `
      *,
      profiles!contracts_employer_id_fkey(name)
    `
    )
    .eq('id', contractId)
    .eq('employer_id', user.id)
    .single();

  if (contractError || !contract) {
    return { success: false, error: 'ê³„ì•½ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ì–´ìš”' };
  }

  // 3. ê·¼ë¡œì ì—°ë½ì²˜ í™•ì¸
  if (!contract.worker_phone) {
    return {
      success: false,
      error: 'ê·¼ë¡œì ì—°ë½ì²˜ê°€ ì—†ì–´ìš”. ê³„ì•½ì„œë¥¼ ìˆ˜ì •í•´ì£¼ì„¸ìš”.',
    };
  }

  // 4. ê³µìœ  URL ìƒì„±/ì¡°íšŒ
  let shareToken = contract.share_token;
  if (!shareToken) {
    shareToken = crypto.randomUUID().replace(/-/g, '').slice(0, 16);
    await supabase
      .from('contracts')
      .update({ share_token: shareToken })
      .eq('id', contractId);
  }
  const shareUrl = `${process.env.NEXT_PUBLIC_APP_URL}/s/${shareToken}`;

  // 5. ì¬ì „ì†¡ íšŸìˆ˜ í™•ì¸ (ê³„ì•½ì„œë‹¹ ì´ 3íšŒ)
  const { count: sendCount } = await supabase
    .from('notification_logs')
    .select('*', { count: 'exact', head: true })
    .eq('contract_id', contractId)
    .eq('type', 'alimtalk')
    .eq('status', 'sent');

  if (sendCount && sendCount >= 3) {
    return {
      success: false,
      error:
        'ì´ ê³„ì•½ì„œëŠ” ìµœëŒ€ 3ë²ˆê¹Œì§€ë§Œ ì•Œë¦¼í†¡ì„ ë³´ë‚¼ ìˆ˜ ìˆì–´ìš”. ë§í¬ë¥¼ ë³µì‚¬í•´ì„œ ì§ì ‘ ë³´ë‚´ì£¼ì„¸ìš”.',
      data: { shareUrl, alimtalkSent: false },
    };
  }

  // 6. ì•Œë¦¼í†¡ ë°œì†¡
  const alimtalkResult = await sendAlimtalk({
    phoneNumber: normalizePhone(contract.worker_phone),
    templateCode: 'CONTRACT_SENT',
    message: buildContractSentMessage({
      employerName: contract.profiles?.name || 'ì‚¬ì¥ë‹˜',
      workLocation: contract.work_location,
      hourlyWage: contract.hourly_wage,
      monthlyWage: contract.monthly_wage,
      wageType: contract.wage_type || 'hourly',
      startDate: contract.start_date,
      expiresAt: contract.expires_at,
    }),
    buttonUrl: shareUrl,
  });

  // 7. ë°œì†¡ ë¡œê·¸ ì €ì¥
  await supabase.from('notification_logs').insert({
    user_id: user.id,
    contract_id: contractId,
    recipient_phone: contract.worker_phone,
    type: 'alimtalk',
    template_code: 'CONTRACT_SENT',
    status: alimtalkResult.success ? 'sent' : 'failed',
    message_id: alimtalkResult.messageId,
    error: alimtalkResult.error,
    created_at: new Date().toISOString(),
  });

  // 8. ê²°ê³¼ ë°˜í™˜
  if (alimtalkResult.success) {
    return {
      success: true,
      data: { shareUrl, alimtalkSent: true },
    };
  } else {
    return {
      success: false,
      error: `ì•Œë¦¼í†¡ ë°œì†¡ì— ì‹¤íŒ¨í–ˆì–´ìš”: ${alimtalkResult.error}`,
      data: { shareUrl, alimtalkSent: false },
    };
  }
}
```

### 7.2 ì¬ì „ì†¡ ì œí•œ

- ê³„ì•½ì„œë‹¹ ì´ 3íšŒê¹Œì§€ ì•Œë¦¼í†¡ ë°œì†¡ ê°€ëŠ¥
- ì œí•œ ì´ˆê³¼ ì‹œ ë§í¬ ë³µì‚¬ ì•ˆë‚´

---

## 8. UI/UX ë³€ê²½ ìƒì„¸

### 8.1 ë²„íŠ¼ ë¬¸êµ¬ ë³€ê²½

| ìƒíƒœ           | ë³€ê²½ ì „              | ë³€ê²½ í›„              |
| -------------- | -------------------- | -------------------- |
| ì„œëª… ì „ (ì‹ ê·œ) | ì„œëª…í•˜ê³  ì €ì¥í•˜ê¸° âœï¸ | ì„œëª…í•˜ê³  ì „ì†¡í•˜ê¸° âœï¸ |
| ì„œëª… í›„ (ì‹ ê·œ) | ì €ì¥í•˜ê³  ê³µìœ í•˜ê¸° ğŸ“¤ | ì €ì¥í•˜ê³  ì „ì†¡í•˜ê¸° ğŸ“¤ |
| ê¸°ì¡´ ê³„ì•½ì„œ    | ê·¼ë¡œìì—ê²Œ ë³´ë‚´ê¸° ğŸ“¤ | ì•Œë¦¼í†¡ ë³´ë‚´ê¸° ğŸ“¤     |

### 8.2 ì „ì†¡ ì„±ê³µ í™”ë©´

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                 â”‚
â”‚           âœ…                    â”‚
â”‚                                 â”‚
â”‚   ê³„ì•½ì„œê°€ ì „ì†¡ëì–´ìš”!           â”‚
â”‚                                 â”‚
â”‚   í™ê¸¸ë™ë‹˜ì˜ ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ         â”‚
â”‚   ê³„ì•½ì„œê°€ ë°œì†¡ëì–´ìš”.           â”‚
â”‚                                 â”‚
â”‚   ì„œëª…ì´ ì™„ë£Œë˜ë©´                â”‚
â”‚   ì•Œë¦¼ì„ ë³´ë‚´ë“œë¦´ê²Œìš”.           â”‚
â”‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [PDF]  [ë§í¬]  [ì¹´ì¹´ì˜¤í†¡]       â”‚  â† ë³´ì¡° ê³µìœ  ì˜µì…˜
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.3 ì „ì†¡ ì‹¤íŒ¨ í™”ë©´

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                 â”‚
â”‚           âš ï¸                    â”‚
â”‚                                 â”‚
â”‚   ì•Œë¦¼í†¡ ë°œì†¡ì— ì‹¤íŒ¨í–ˆì–´ìš”       â”‚
â”‚                                 â”‚
â”‚   ì¹´ì¹´ì˜¤í†¡ì´ ì—†ê±°ë‚˜              â”‚
â”‚   ì—°ë½ì²˜ê°€ ì˜ëª»ëì„ ìˆ˜ ìˆì–´ìš”.   â”‚
â”‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ë‹¤ì‹œ ì‹œë„í•˜ê¸° ğŸ”„]              â”‚  â† ì¬ì „ì†¡ ë²„íŠ¼
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         ë˜ëŠ”                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ë§í¬ë¥¼ ë³µì‚¬í•´ì„œ ì§ì ‘ ë³´ë‚´ì„¸ìš”    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ signplease.kr/s/... â”‚ë³µì‚¬ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.4 ì¬ì „ì†¡ ì œí•œ ì•ˆë‚´

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                 â”‚
â”‚           â„¹ï¸                    â”‚
â”‚                                 â”‚
â”‚   ì•Œë¦¼í†¡ì„ 3ë²ˆ ë³´ëƒˆì–´ìš”          â”‚
â”‚                                 â”‚
â”‚   ì´ ê³„ì•½ì„œëŠ” ë” ì´ìƒ            â”‚
â”‚   ì•Œë¦¼í†¡ì„ ë³´ë‚¼ ìˆ˜ ì—†ì–´ìš”.       â”‚
â”‚                                 â”‚
â”‚   ë§í¬ë¥¼ ë³µì‚¬í•´ì„œ                â”‚
â”‚   ì§ì ‘ ë³´ë‚´ì£¼ì„¸ìš”.              â”‚
â”‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ signplease.kr/s/... â”‚ë³µì‚¬ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.5 ê·¼ë¡œì ì—°ë½ì²˜ ì…ë ¥ UI ê°•í™”

í˜„ì¬ Step 4(ê·¼ë¡œì ì •ë³´)ì—ì„œ ì—°ë½ì²˜ ì…ë ¥ì´ ìˆì§€ë§Œ, ì¤‘ìš”ì„±ì„ ê°•ì¡°:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ê·¼ë¡œì ì—°ë½ì²˜                   â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 010-1234-5678           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚  ğŸ’¡ ì´ ë²ˆí˜¸ë¡œ ê³„ì•½ì„œ ì•Œë¦¼í†¡ì´    â”‚
â”‚     ë°œì†¡ë©ë‹ˆë‹¤                  â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. êµ¬í˜„ ìˆœì„œ (Task ëª©ë¡)

### Phase 1: ì¸í”„ë¼ ì„¤ì • (ì™¸ë¶€ ì„œë¹„ìŠ¤)

| #   | Task                                | ì˜ì¡´ì„±   | ì˜ˆìƒ ì‹œê°„ | ë‹´ë‹¹   |
| --- | ----------------------------------- | -------- | --------- | ------ |
| 1.1 | ì•Œë¦¬ê³  API Key ë°œê¸‰                 | -        | 10ë¶„      | ì‚¬ìš©ì |
| 1.2 | ì¹´ì¹´ì˜¤ ë¹„ì¦ˆë‹ˆìŠ¤ ì±„ë„ ì‹¬ì‚¬ ì™„ë£Œ ëŒ€ê¸° | -        | 1-3ì¼     | ì¹´ì¹´ì˜¤ |
| 1.3 | ì•Œë¦¬ê³  ë°œì‹ í”„ë¡œí•„ ë“±ë¡              | 1.2      | 10ë¶„      | ì‚¬ìš©ì |
| 1.4 | ì•Œë¦¼í†¡ í…œí”Œë¦¿ ë“±ë¡ ë° ì‹¬ì‚¬          | 1.3      | 1-3ì¼     | ì¹´ì¹´ì˜¤ |
| 1.5 | í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (.env.local, Vercel) | 1.1, 1.3 | 10ë¶„      | ì‚¬ìš©ì |

### Phase 2: ë°±ì—”ë“œ êµ¬í˜„

| #   | Task                                           | ì˜ì¡´ì„±        | ì˜ˆìƒ ì‹œê°„ | íŒŒì¼                     |
| --- | ---------------------------------------------- | ------------- | --------- | ------------------------ |
| 2.1 | `notification_logs` í…Œì´ë¸” ìƒì„± (Supabase MCP) | -             | 10ë¶„      | -                        |
| 2.2 | TypeScript íƒ€ì… ì¶”ê°€                           | 2.1           | 10ë¶„      | `types/database.ts`      |
| 2.3 | ì „í™”ë²ˆí˜¸ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ìƒì„±                    | -             | 15ë¶„      | `lib/utils/phone.ts`     |
| 2.4 | ì•Œë¦¬ê³  API í´ë¼ì´ì–¸íŠ¸ ìƒì„±                     | -             | 30ë¶„      | `lib/aligo/client.ts`    |
| 2.5 | í…œí”Œë¦¿ ë©”ì‹œì§€ ë¹Œë” ìƒì„±                        | -             | 20ë¶„      | `lib/aligo/templates.ts` |
| 2.6 | Server Action ìˆ˜ì • (ì•Œë¦¼í†¡ ë°œì†¡ ë¡œì§)          | 2.3, 2.4, 2.5 | 45ë¶„      | `actions.ts`             |

### Phase 3: í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„

| #   | Task                       | ì˜ì¡´ì„± | ì˜ˆìƒ ì‹œê°„ | íŒŒì¼                   |
| --- | -------------------------- | ------ | --------- | ---------------------- |
| 3.1 | ë²„íŠ¼ ë¬¸êµ¬ ë³€ê²½             | -      | 10ë¶„      | `contract-preview.tsx` |
| 3.2 | ì „ì†¡ ì„±ê³µ UI êµ¬í˜„          | 2.6    | 30ë¶„      | `contract-preview.tsx` |
| 3.3 | ì „ì†¡ ì‹¤íŒ¨ UI êµ¬í˜„          | 2.6    | 30ë¶„      | `contract-preview.tsx` |
| 3.4 | ì¬ì „ì†¡ ì œí•œ UI êµ¬í˜„        | 2.6    | 20ë¶„      | `contract-preview.tsx` |
| 3.5 | ê·¼ë¡œì ì—°ë½ì²˜ ì…ë ¥ UI ê°•í™” | -      | 15ë¶„      | `Step2WorkerName.tsx`  |
| 3.6 | ë§í¬ ë³µì‚¬ ë³´ì¡° ê¸°ëŠ¥ ìœ ì§€   | -      | 10ë¶„      | `contract-preview.tsx` |

### Phase 4: í…ŒìŠ¤íŠ¸ ë° ë°°í¬

| #   | Task                          | ì˜ì¡´ì„±   | ì˜ˆìƒ ì‹œê°„ |
| --- | ----------------------------- | -------- | --------- |
| 4.1 | ë¡œì»¬ í…ŒìŠ¤íŠ¸ (ê°œë°œì ë²ˆí˜¸ë¡œ)   | 2.6, 3.4 | 30ë¶„      |
| 4.2 | Vercel Preview ë°°í¬ ë° í…ŒìŠ¤íŠ¸ | 4.1      | 20ë¶„      |
| 4.3 | Production ë°°í¬               | 4.2      | 10ë¶„      |
| 4.4 | ì‹¤ì œ ì‚¬ìš©ì í…ŒìŠ¤íŠ¸            | 4.3      | 1ì‹œê°„     |

---

## 10. í…ŒìŠ¤íŠ¸ ê³„íš

### 10.1 ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

| í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤        | ì˜ˆìƒ ê²°ê³¼                              | í™•ì¸ |
| -------------------- | -------------------------------------- | ---- |
| ì•Œë¦¼í†¡ ì •ìƒ ë°œì†¡     | ì¹´ì¹´ì˜¤í†¡ ì•Œë¦¼ ìˆ˜ì‹ , ë²„íŠ¼ URL ì •ìƒ ì‘ë™ | â¬œ   |
| ì˜ëª»ëœ ì „í™”ë²ˆí˜¸      | "ì—°ë½ì²˜ê°€ ì˜ëª»ëì–´ìš”" ì—ëŸ¬ í‘œì‹œ        | â¬œ   |
| ì¹´ì¹´ì˜¤í†¡ ë¯¸ì„¤ì¹˜ ë²ˆí˜¸ | ì•Œë¦¼í†¡ ì‹¤íŒ¨ + ë§í¬ ë³µì‚¬ ì•ˆë‚´           | â¬œ   |
| ì¬ì „ì†¡ (1~3íšŒ)       | ì •ìƒ ë°œì†¡                              | â¬œ   |
| ì¬ì „ì†¡ (4íšŒì§¸)       | "3ë²ˆê¹Œì§€ë§Œ ë³´ë‚¼ ìˆ˜ ìˆì–´ìš”" ì—ëŸ¬        | â¬œ   |
| ë°œì†¡ ë¡œê·¸ ì €ì¥       | DBì— ì •ìƒ ê¸°ë¡                         | â¬œ   |
| ë§í¬ ë³µì‚¬ ê¸°ëŠ¥       | ì •ìƒ ì‘ë™ (ë³´ì¡° ìˆ˜ë‹¨)                  | â¬œ   |
| ë²„íŠ¼ URL ì •ìƒ ì‘ë™   | ì„œëª… í˜ì´ì§€ë¡œ ì´ë™                     | â¬œ   |
| ë³€ìˆ˜ ì¹˜í™˜ ì •ìƒ ë™ì‘  | ì‚¬ì¥ë‹˜ì´ë¦„, ê·¼ë¬´ì§€ ë“± í‘œì‹œ             | â¬œ   |

### 10.2 ì—£ì§€ ì¼€ì´ìŠ¤

| ì¼€ì´ìŠ¤              | ì²˜ë¦¬ ë°©ë²•                     |
| ------------------- | ----------------------------- |
| ê·¼ë¡œì ì—°ë½ì²˜ ì—†ìŒ  | ì €ì¥ ì „ ì—°ë½ì²˜ ì…ë ¥ í•„ìˆ˜ ì•ˆë‚´ |
| ì•Œë¦¬ê³  API íƒ€ì„ì•„ì›ƒ | 10ì´ˆ íƒ€ì„ì•„ì›ƒ + ì¬ì‹œë„ ì•ˆë‚´   |
| ì•Œë¦¬ê³  ì„œë²„ ì¥ì•     | ë§í¬ ë³µì‚¬ë¡œ ëŒ€ì²´ ì•ˆë‚´         |
| í…œí”Œë¦¿ ë³€ìˆ˜ ëˆ„ë½    | ê¸°ë³¸ê°’ ì‚¬ìš© (ì˜ˆ: "ì‚¬ì¥ë‹˜")    |

---

## 11. ë¡¤ë°± ê³„íš

ì•Œë¦¼í†¡ ë°œì†¡ì— ë¬¸ì œê°€ ìƒê¸¸ ê²½ìš° ë¡¤ë°± ìˆœì„œ:

### 11.1 ì¦‰ì‹œ ë¡¤ë°± (ê¸°ëŠ¥ ë¹„í™œì„±í™”)

```typescript
// í™˜ê²½ ë³€ìˆ˜ ê¸°ë°˜ On/Off
const ALIMTALK_ENABLED = process.env.ALIMTALK_ENABLED === 'true';

if (!ALIMTALK_ENABLED) {
  // ê¸°ì¡´ ë¡œì§ìœ¼ë¡œ í´ë°± (ë§í¬ ìƒì„±ë§Œ)
  return sendContract(contractId);
}
```

### 11.2 í™˜ê²½ ë³€ìˆ˜ ê¸°ë°˜ ë¡¤ë°±

Vercel ëŒ€ì‹œë³´ë“œì—ì„œ `ALIMTALK_ENABLED=false`ë¡œ ì„¤ì •í•˜ë©´ ì¦‰ì‹œ ë¹„í™œì„±í™”

### 11.3 ì™„ì „ ë¡¤ë°±

1. `contract-preview.tsx`ë¥¼ ì´ì „ ë²„ì „ìœ¼ë¡œ ë³µêµ¬
2. `actions.ts`ë¥¼ ì´ì „ ë²„ì „ìœ¼ë¡œ ë³µêµ¬
3. ì¬ë°°í¬

---

## 12. ë¹„ìš© ì˜ˆìƒ

| í•­ëª©     | ë‹¨ê°€    | ì›” ì˜ˆìƒ ë°œì†¡ëŸ‰ | ì›” ë¹„ìš©         |
| -------- | ------- | -------------- | --------------- |
| ì•Œë¦¼í†¡   | ~8ì›/ê±´ | 500ê±´          | 4,000ì›         |
| **ì´í•©** |         |                | **~4,000ì›/ì›”** |

> ìš´ì˜ë¹„ì— í¬í•¨ (ì‚¬ìš©ì ë¬´ë£Œ)  
> SMS Fallback ë¯¸ì‚¬ìš©ìœ¼ë¡œ ì¶”ê°€ ë¹„ìš© ì—†ìŒ

---

## 13. ì°¸ê³  ë¬¸ì„œ

- [ì•Œë¦¬ê³  ì•Œë¦¼í†¡ API ë¬¸ì„œ](https://smartsms.aligo.in/admin/api/kakao.html)
- [ì¹´ì¹´ì˜¤ ë¹„ì¦ˆë‹ˆìŠ¤ ì±„ë„ ê°€ì´ë“œ](https://business.kakao.com/info/kakaochannel/)

---

> **ë‹¤ìŒ ë‹¨ê³„**: ì¹´ì¹´ì˜¤ ë¹„ì¦ˆë‹ˆìŠ¤ ì±„ë„ ì‹¬ì‚¬ ì™„ë£Œ í›„ Phase 1.3ë¶€í„° ì§„í–‰
